# 데카트론 AI 챗봇 실행 가이드 (간단 버전)

## 1. 사전 준비

* **Python:** Python 3.10 이상 버전 설치
* **Git:** 소스 코드 복제(clone)를 위해 Git 설치

## 2. 설치

1.  **소스 코드 복제:**
    ```bash
    git clone <저장소_URL>
    cd <프로젝트_디렉토리>
    ```

2.  **가상 환경 생성 및 활성화:** (권장)
    ```bash
    python -m venv venv
    # Windows
    venv\Scripts\activate
    # macOS/Linux
    source venv/bin/activate
    ```

3.  **필수 라이브러리 설치:**
    ```bash
    pip install -r requirements.txt
    ```

## 3. 설정

1.  **.env 파일 생성:**
    * 프로젝트 루트 디렉토리의 `.env.example` 파일을 복사하여 `.env` 파일을 생성합니다.
    * `.env` 파일 안에 실제 **OpenAI API 키**를 입력합니다.
        ```dotenv
        OPENAI_API_KEY="sk-..."
        ```
    * `.env` 파일은 Git 추적에서 제외되므로 안전하게 관리해야 합니다.

2.  **config.yaml 검토:** (선택 사항)
    * 프로젝트 루트의 `config.yaml` 파일에서 모델 이름, 프롬프트, RAG 파이프라인 설정 등을 필요에 따라 검토하거나 수정할 수 있습니다. (기본 설정으로도 동작 가능)

## 4. RAG 데이터 생성 (최초 1회 또는 문서 변경 시)

* 원본 문서를 벡터화하여 FAISS 인덱스와 메타데이터 파일을 생성합니다. (`data/` 디렉토리에 저장됨)
    ```bash
    python -m pipeline.rag_generator
    ```
* **주의:** 이 과정은 OpenAI Embedding API를 호출하므로 비용이 발생할 수 있습니다. 문서 양에 따라 시간이 소요될 수 있습니다.

## 5. 챗봇 서버 실행

* FastAPI 기반의 챗봇 서버를 실행합니다. (기본: `http://127.0.0.1:8000`)
    ```bash
    # 프로젝트 루트 디렉토리에서 실행
    uvicorn chatbot.app:app --reload --host 127.0.0.1 --port 8000
    ```
    * `--reload` 옵션은 개발 중 코드 변경 시 서버 자동 재시작 기능입니다. 배포 시에는 제거합니다.
* 서버 실행 후 웹 브라우저에서 `http://127.0.0.1:8000`으로 접속하면 간단한 UI를 통해 챗봇과 대화할 수 있습니다. API 문서는 `http://127.0.0.1:8000/docs`에서 확인 가능합니다.

## 6. (선택) 테스트 실행

1.  **테스트 케이스 생성:** (필요 시)
    * `tests/test_cases/` 디렉토리에 테스트 질문 세트를 생성합니다.
        ```bash
        python -m tests.test_generator
        ```

2.  **테스트 실행:**
    * 생성된 테스트 케이스를 사용하여 챗봇 API를 테스트하고 결과를 저장합니다.
    * **기능 테스트:**
        ```bash
        python -m tests.test_runner --test-type function
        ```
    * **전체 테스트 (예: 세트 1):**
        ```bash
        python -m tests.test_runner --test-type overall --set 1
        ```
    * 테스트 결과는 `tests/test_results/` 디렉토리에 `.jsonl` 파일로 저장됩니다.

## 7. (선택) 테스트 결과 시각화

* 저장된 테스트 결과 파일(`.jsonl`)을 분석하여 성능 지표 그래프와 요약 리포트를 생성합니다.
    ```bash
    # 예시: 특정 결과 파일 사용
    python -m tests.visualize_results --input tests/test_results/test_run_overall_set1_*.jsonl --output-dir test_plots/overall_set1

    # 예시: 특정 패턴의 모든 결과 파일 사용
    python -m tests.visualize_results --input "tests/test_results/*.jsonl" --output-dir test_plots/all_runs
    ```
* 생성된 그래프 이미지와 `summary_report.txt` 파일은 지정된 `--output-dir` (기본값: `test_plots/`) 에서 확인할 수 있습니다.